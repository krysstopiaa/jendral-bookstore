<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jendral's Bookstore ‚Äî Caf√© Edition</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1: #f7efe6; /* cream */
      --bg2: #efe1d0; /* light brown */
      --card: #fffaf6;
      --accent: #7b4f3a; /* dark brown */
      --accent-2: #c89b6a; /* warm gold */
      --muted: #6b5a4a;
      --glass: rgba(255,255,255,0.6);
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Poppins,system-ui,Segoe UI,Roboto,-apple-system,Arial;color:var(--accent);background:linear-gradient(180deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased}

    header{display:flex;align-items:center;justify-content:space-between;padding:18px 28px;background:transparent}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;box-shadow:0 8px 20px rgba(11,62,40,0.08)}
    .logo svg{width:28px;height:28px}
    .title{line-height:1}
    .title .name{font-weight:700;font-size:20px}
    .title .tag{font-size:12px;color:var(--muted)}

    .controls{display:flex;gap:10px;align-items:center}
    .btn{background:var(--card);border:1px solid rgba(0,0,0,0.06);padding:10px 12px;border-radius:10px;cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff;border:none}

    /* Hero cafe-style */
    .hero{min-height:360px;background-image:url('https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1600&q=80');background-size:cover;background-position:center;border-radius:18px;margin:12px 28px 0;position:relative;overflow:hidden}
    .hero::after{content:'';position:absolute;inset:0;background:linear-gradient(180deg,rgba(24,18,15,0.45),rgba(255,248,241,0.25))}
    .hero-inner{position:relative;z-index:2;padding:48px 36px;display:flex;align-items:center;gap:24px}
    .hero-text{color:#fff;max-width:760px}
    .hero-text h1{margin:0;font-size:36px;letter-spacing:0.2px}
    .hero-text p{margin:12px 0;color:rgba(255,255,255,0.9)}
    .hero-cta{margin-top:8px}
    .hero a{background:var(--accent-2);color:var(--accent);padding:10px 16px;border-radius:999px;text-decoration:none;font-weight:600}

    main{max-width:1200px;margin:26px auto;padding:0 18px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:18px}

    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 10px 30px rgba(11,18,14,0.06);display:flex;flex-direction:column;gap:10px;align-items:center}
    .card img{width:140px;height:200px;object-fit:cover;border-radius:8px;box-shadow:0 6px 18px rgba(11,18,14,0.06)}
    .meta{font-weight:600;text-align:center}
    .author{font-size:13px;color:var(--muted)}
    .price{font-weight:700;margin-top:6px}
    .actions{display:flex;gap:8px;width:100%}
    .actions button{flex:1;padding:8px;border-radius:10px;border:none;cursor:pointer}
    .actions .detail{background:transparent;border:1px solid rgba(0,0,0,0.06)}
    .actions .add{background:var(--accent);color:#fff}

    /* cart floating */
    .cart-float{position:fixed;right:22px;bottom:22px;width:360px;max-height:72vh;overflow:auto;border-radius:16px;padding:12px;background:linear-gradient(180deg,#fff,#fff8f2);box-shadow:0 18px 40px rgba(11,18,14,0.12);display:none;z-index:80}
    .cart-float h4{margin:0 0 8px}
    .cart-item{display:flex;gap:10px;align-items:center;padding:8px;border-radius:10px}
    .cart-item img{width:52px;height:72px;object-fit:cover;border-radius:6px}
    .cart-footer{margin-top:12px}

    /* modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(6,8,10,0.45);display:none;align-items:center;justify-content:center;z-index:90}
    .modal{background:var(--card);width:95%;max-width:820px;border-radius:16px;padding:18px;box-shadow:0 20px 50px rgba(8,12,30,0.2)}
    .modal .grid{display:grid;grid-template-columns:260px 1fr;gap:16px}
    .modal img{width:100%;height:360px;object-fit:cover;border-radius:12px}
    .muted{color:var(--muted)}

    .quantity{display:inline-flex;align-items:center;border-radius:8px;overflow:hidden;border:1px solid rgba(0,0,0,0.06)}
    .quantity button{background:transparent;border:none;padding:8px 10px;cursor:pointer}
    .quantity input{width:56px;border:none;text-align:center;padding:8px}

    footer{max-width:1200px;margin:40px auto;color:var(--muted);text-align:center;padding:20px}

    @media (max-width:900px){.modal .grid{grid-template-columns:1fr}.modal img{height:220px}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo" aria-hidden>
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 19.5C4 18.67 4.67 18 5.5 18H20" stroke="white" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 4.5C4 5.33 4.67 6 5.5 6H20" stroke="white" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 6v13" stroke="rgba(255,255,255,0.25)" stroke-width="1.2" stroke-linecap="round"/></svg>
      </div>
      <div class="title"><div class="name">Jendral's Bookstore</div><div class="tag muted">Caf√© ‚Ä¢ Koleksi klasik & modern</div></div>
    </div>
    <div class="controls">
      <button class="btn" id="searchBtn">üîé Cari</button>
      <button class="btn primary" id="openCartBtn">üõí Keranjang (<span id="miniCount">0</span>)</button>
    </div>
  </header>

  <div class="hero" role="banner">
    <div class="hero-inner">
      <div class="hero-text">
        <h1>Selamat Datang di Jendral's Bookstore</h1>
        <p>Ambil secangkir kopi, duduk santai, dan temukan buku yang berbicara untukmu.</p>
        <div class="hero-cta"><a href="#catalog">Lihat Koleksi Buku</a></div>
      </div>
    </div>
  </div>

  <main id="catalog">
    <section style="margin-top:18px;max-width:1200px;margin-left:auto;margin-right:auto;padding:0 18px">
      <h3 style="margin:0 0 12px">Rekomendasi untukmu</h3>
      <div class="grid" id="productGrid"></div>
    </section>
  </main>

  <!-- cart float -->
  <aside class="cart-float" id="cartFloat">
    <h4>Keranjang</h4>
    <div id="cartList"></div>
    <div class="cart-footer">
      <div class="muted">Total: <strong id="cartTotal">Rp0</strong></div>
      <div style="margin-top:8px;display:flex;gap:8px">
        <button class="btn" id="viewCartBtn">Lihat & Edit</button>
        <button class="btn primary" id="orderWaBtn">Pesan via WhatsApp</button>
      </div>
    </div>
  </aside>

  <!-- detail modal -->
  <div class="modal-backdrop" id="detailBackdrop">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="grid">
        <img id="detailCover" src="" alt="cover">
        <div>
          <h3 id="detailTitle">Judul</h3>
          <div class="muted" id="detailAuthor">Penulis</div>
          <div style="margin-top:12px;font-weight:700" id="detailPrice">Rp0</div>
          <p class="muted" id="detailDesc" style="margin-top:12px"></p>

          <div style="margin-top:16px;display:flex;gap:8px;align-items:center">
            <div class="quantity">
              <button onclick="decQty()">‚àí</button>
              <input id="detailQty" type="number" value="1" min="1" />
              <button onclick="incQty()">Ôºã</button>
            </div>
            <button class="btn primary" id="detailAddBtn">Tambah ke Keranjang</button>
            <button class="btn" onclick="closeDetail()">Tutup</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- cart editor modal -->
  <div class="modal-backdrop" id="cartEditorBackdrop" style="display:none;align-items:center;justify-content:center">
    <div class="modal" style="max-width:760px">
      <h3>Keranjang</h3>
      <div id="cartEditor"></div>
      <div style="margin-top:12px;text-align:right">
        <div class="muted">Total: <strong id="editorTotal">Rp0</strong></div>
        <div style="margin-top:8px;display:flex;gap:8px;justify-content:flex-end">
          <button class="btn" id="closeCartEditor">Tutup</button>
          <button class="btn primary" id="checkoutBtn">Pesan via WhatsApp</button>
        </div>
      </div>
    </div>
  </div>

  <footer>¬© 2025 Jendral's Bookstore ‚Äî caf√© edition</footer>

  <!-- Tentang Kami Section -->
  <section style="background: var(--bg2); padding: 40px 20px; margin-top: 40px;">
    <div style="max-width: 800px; margin: 0 auto; text-align: center;">
      <h2 style="color: var(--accent); margin-bottom: 20px;">üïØÔ∏è Tentang Kami</h2>
      <p style="color: var(--muted); line-height: 1.6; font-size: 16px;">
        Selamat datang di Jendral's Bookstore, tempat di mana setiap halaman buku membawa kehangatan dan inspirasi.<br>
        Kami percaya bahwa membaca bukan sekadar hobi, tapi perjalanan menemukan diri dan dunia.<br>
        Di sini, kamu bisa menemukan berbagai buku dari sastra klasik hingga pengembangan diri ‚Äî semuanya dipilih dengan hati.<br>
        üì¶ Pesan mudah lewat WhatsApp, kirim cepat, dan pelayanan ramah seperti sahabat pembaca sejati.
      </p>
    </div>
  </section>

  <script>
    // products with covers and descriptions - DIPERBAIKI DENGAN MENGGUNAKAN GAMBAR YANG DIBERIKAN
    const products = [
      {id:1,title:'The Psychology of Money',author:'Morgan Housel',price:99000,img:'https://images-na.ssl-images-amazon.com/images/I/81Lb75rUhLL.jpg',desc:'Bagaimana perilaku dan emosi memengaruhi keputusan finansial.'},
      {id:2,title:'Atomic Habits',author:'James Clear',price:115000,img:'https://m.media-amazon.com/images/I/91bYsX41DVL._AC_UF1000,1000_QL80_.jpg',desc:'Sistem praktis untuk membentuk kebiasaan baik dan menghentikan kebiasaan buruk.'},
      {id:3,title:'Rich Dad Poor Dad',author:'Robert Kiyosaki',price:120000,img:'https://m.media-amazon.com/images/I/81bsw6fnUiL.jpg',desc:'Pelajaran finansial praktis dari dua figur ayah.'},
      {id:4,title:'Laskar Pelangi',author:'Andrea Hirata',price:85000,img:'https://i.postimg.cc/N0tKqRcP/Laskar-pelangi-sampul.jpg',desc:'Kisah inspiratif anak-anak Belitung dalam mengejar pendidikan.'},
      {id:5,title:'Filosofi Teras',author:'Henry Manampiring',price:90000,img:'https://i.postimg.cc/cHq8JPwT/1.jpg',desc:'Panduan menerapkan stoisisme dalam kehidupan sehari-hari.'},
      {id:6,title:'Sapiens',author:'Yuval Noah Harari',price:150000,img:'https://m.media-amazon.com/images/I/713jIoMO3UL._AC_UF1000,1000_QL80_.jpg',desc:'Sejarah umat manusia dari masa ke masa.'},
      {id:7,title:'Bumi Manusia',author:'Pramoedya Ananta Toer',price:95000,img:'https://i.postimg.cc/PqHCs1jV/1398034.jpg',desc:'Novel monumental tentang identitas dan perlawanan.'},
      {id:8,title:'Ikigai',author:'Hector Garcia',price:120000,img:'https://m.media-amazon.com/images/I/71tbalAHYCL._AC_UF1000,1000_QL80_.jpg',desc:'Menemukan alasan hidup yang membuat kita bergairah.'},
      {id:9,title:'The Subtle Art of Not Giving a F*ck',author:'Mark Manson',price:105000,img:'https://m.media-amazon.com/images/I/71QKQ9mwV7L.jpg',desc:'Belajar memilih apa yang benar-benar penting dalam hidup.'},
      {id:10,title:'Dilan 1990',author:'Pidi Baiq',price:85000,img:'https://i.postimg.cc/k5C23Wmj/cov-RN-145.jpg',desc:'Roman remaja populer berlatar Bandung tahun 1990-an.'},
      {id:11,title:'Thinking, Fast and Slow',author:'Daniel Kahneman',price:140000,img:'https://i.postimg.cc/fyYbrbPk/71f6Dceq-ZAL-AC-UF894-1000-QL80.jpg',desc:'Dua sistem berpikir manusia dan bias kognitif.'},
      {id:12,title:'Negeri 5 Menara',author:'Ahmad Fuadi',price:95000,img:'https://i.postimg.cc/kgK2pfkT/5menaradlm.jpg',desc:'Perjalanan persahabatan dan pendidikan di pesantren.'}
    ];

    // state
    let cart = JSON.parse(localStorage.getItem('jb_cart')||'[]');
    let currentProduct = null;

    const grid = document.getElementById('productGrid');
    const miniCount = document.getElementById('miniCount');
    const cartFloat = document.getElementById('cartFloat');
    const cartList = document.getElementById('cartList');
    const cartTotalEl = document.getElementById('cartTotal');

    const detailBackdrop = document.getElementById('detailBackdrop');
    const detailCover = document.getElementById('detailCover');
    const detailTitle = document.getElementById('detailTitle');
    const detailAuthor = document.getElementById('detailAuthor');
    const detailPrice = document.getElementById('detailPrice');
    const detailDesc = document.getElementById('detailDesc');
    const detailQty = document.getElementById('detailQty');
    const detailAddBtn = document.getElementById('detailAddBtn');

    const cartEditorBackdrop = document.getElementById('cartEditorBackdrop');
    const cartEditor = document.getElementById('cartEditor');
    const editorTotal = document.getElementById('editorTotal');

    // render products
    function renderProducts(){
      grid.innerHTML='';
      products.forEach(p=>{
        const el = document.createElement('div'); el.className='card';
        el.innerHTML = `<img src="${p.img}" alt="${p.title}"><div class='meta'>${p.title}</div><div class='author'>${p.author}</div><div class='price'>Rp${Number(p.price).toLocaleString('id-ID')}</div><div class='actions'><button class='detail' onclick='openDetail(${p.id})'>Lihat Detail</button><button class='add' onclick='addToCartById(${p.id})'>Tambah</button></div>`;
        grid.appendChild(el);
      });
    }

    renderProducts();

    // detail modal
    function openDetail(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      currentProduct = p;
      detailCover.src = p.img; detailTitle.textContent = p.title; detailAuthor.textContent = p.author; detailPrice.textContent = 'Rp'+Number(p.price).toLocaleString('id-ID'); detailDesc.textContent = p.desc; detailQty.value = 1;
      detailAddBtn.onclick = ()=>{ addToCart(p, Number(detailQty.value||1)); closeDetail(); };
      detailBackdrop.style.display='flex';
    }
    function closeDetail(){ detailBackdrop.style.display='none'; }
    function incQty(){ detailQty.value = Number(detailQty.value||1)+1; }
    function decQty(){ detailQty.value = Math.max(1, Number(detailQty.value||1)-1); }

    // cart logic
    function addToCartById(id){ const p = products.find(x=>x.id===id); addToCart(p,1); }
    function addToCart(product,qty=1){
      const idx = cart.findIndex(i=>i.id===product.id);
      if(idx>-1) cart[idx].qty += qty; else cart.push({id:product.id,title:product.title,price:product.price,qty});
      saveCart(); renderCartFloat(); showCartFloat(); flash('Berhasil ditambahkan ke keranjang');
    }

    function saveCart(){ localStorage.setItem('jb_cart', JSON.stringify(cart)); }

    function renderCartFloat(){
      miniCount.textContent = cart.reduce((s,i)=>s+i.qty,0);
      if(cart.length===0){ cartFloat.style.display='none'; cartList.innerHTML=''; cartTotalEl.textContent='Rp0'; return; }
      cartFloat.style.display='block'; cartList.innerHTML=''; let total=0;
      cart.forEach((i,idx)=>{ const p=products.find(x=>x.id===i.id); const sub = p.price*i.qty; total+=sub; const item = document.createElement('div'); item.className='cart-item'; item.innerHTML = `<img src='${p.img}' alt='${p.title}'><div style='flex:1'><div style='font-weight:700'>${p.title}</div><div class='muted'>${i.qty} √ó Rp${Number(p.price).toLocaleString('id-ID')}</div></div><div style='text-align:right'><div style='font-weight:800'>Rp${Number(sub).toLocaleString('id-ID')}</div><div style='margin-top:8px;display:flex;gap:6px;justify-content:flex-end'><button class='btn' onclick='changeQty(${idx}, -1)'>-</button><button class='btn' onclick='changeQty(${idx}, 1)'>+</button><button class='btn' onclick='removeItem(${idx})'>Hapus</button></div></div>`; cartList.appendChild(item); });
      cartTotalEl.textContent='Rp'+Number(total).toLocaleString('id-ID');
    }

    function showCartFloat(){ cartFloat.style.display='block'; }
    function changeQty(index,delta){ cart[index].qty = Math.max(1, cart[index].qty + delta); saveCart(); renderCartFloat(); }
    function removeItem(index){ cart.splice(index,1); saveCart(); renderCartFloat(); flash('Item dihapus'); }

    // cart editor
    document.getElementById('openCartBtn').addEventListener('click', ()=> openCartEditor());
    document.getElementById('viewCartBtn').addEventListener('click', ()=> openCartEditor());
    function openCartEditor(){ renderCartEditor(); cartEditorBackdrop.style.display='flex'; }
    document.getElementById('closeCartEditor').addEventListener('click', ()=> cartEditorBackdrop.style.display='none');

    function renderCartEditor(){ if(cart.length===0){ cartEditor.innerHTML='<div class="muted">Keranjang kosong.</div>'; editorTotal.textContent='Rp0'; return;} let html=`<table style="width:100%;border-collapse:collapse"><thead><tr style="background:#fff2e6"><th style="text-align:left;padding:8px">Judul</th><th style="padding:8px">Qty</th><th style="padding:8px">Harga</th><th style="padding:8px">Subtotal</th><th style="padding:8px">Aksi</th></tr></thead><tbody>`; let total=0; cart.forEach((i,idx)=>{ const p=products.find(x=>x.id===i.id); const sub = p.price*i.qty; total += sub; html += `<tr><td style='padding:8px'>${p.title}</td><td style='text-align:center'><input type='number' min='1' value='${i.qty}' style='width:72px' onchange='setQty(${idx}, this.value)'></td><td style='text-align:right;padding:8px'>Rp${Number(p.price).toLocaleString('id-ID')}</td><td style='text-align:right;padding:8px'>Rp${Number(sub).toLocaleString('id-ID')}</td><td style='text-align:center;padding:8px'><button class="btn" onclick='removeItem(${idx})'>Hapus</button></td></tr>` }); html += '</tbody></table>'; cartEditor.innerHTML = html; editorTotal.textContent = 'Rp'+Number(total).toLocaleString('id-ID'); }
    window.setQty = function(idx,v){ cart[idx].qty = Math.max(1, parseInt(v)||1); saveCart(); renderCartEditor(); renderCartFloat(); };

    // checkout to WA - PERBAIKAN DILAKUKAN DI SINI
    function checkoutWhatsapp(){ 
      if(cart.length===0){ 
        flash('Keranjang kosong'); 
        return; 
      } 
      
      let msg = 'Halo, saya ingin memesan buku dari Jendral\'s Bookstore:%0A%0A';
      msg += '*DETAIL PEMESANAN:*%0A%0A';
      
      let total=0; 
      cart.forEach(i=>{ 
        const p=products.find(x=>x.id===i.id); 
        const subtotal = p.price * i.qty;
        msg += `- *${p.title}*%0A`;
        msg += `  Jumlah: ${i.qty} x Rp${Number(p.price).toLocaleString('id-ID')}%0A`;
        msg += `  Subtotal: Rp${Number(subtotal).toLocaleString('id-ID')}%0A%0A`;
        total += subtotal; 
      }); 
      
      msg += `*TOTAL: Rp${Number(total).toLocaleString('id-ID')}*%0A%0A`;
      msg += 'Mohon informasi lebih lanjut mengenai cara pembayaran dan pengiriman. Terima kasih.';
      
      const phone = '6281511345945'; 
      const url = `https://wa.me/${phone}?text=${msg}`; 
      window.open(url,'_blank'); 
    }
    
    document.getElementById('orderWaBtn').addEventListener('click', checkoutWhatsapp);
    document.getElementById('checkoutBtn').addEventListener('click', checkoutWhatsapp);

    // utils
    function flash(text){ const el = document.createElement('div'); el.textContent = text; el.style.position='fixed'; el.style.left='50%'; el.style.transform='translateX(-50%)'; el.style.bottom='26px'; el.style.background='rgba(62,47,34,0.92)'; el.style.color='#fff'; el.style.padding='10px 14px'; el.style.borderRadius='10px'; el.style.zIndex=999; document.body.appendChild(el); setTimeout(()=>el.remove(),1500); }

    // close detail by clicking outside
    detailBackdrop.addEventListener('click',(e)=>{ if(e.target===detailBackdrop) closeDetail(); });
    cartEditorBackdrop.addEventListener('click',(e)=>{ if(e.target===cartEditorBackdrop) cartEditorBackdrop.style.display='none'; });

    // init
    renderProducts(); renderCartFloat();
    window.addEventListener('beforeunload', ()=> saveCart());
  </script>
</body>
</html>
